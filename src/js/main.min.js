document.addEventListener('DOMContentLoaded',function(){initNavigation();initScrollAnimations();initFAQ();initWaitlistForm();initSmoothScrolling();initScrollToTop();initHeaderScroll();initAnimationOnScroll();});function initNavigation(){const navToggle=document.getElementById('nav-toggle');const navMenu=document.getElementById('nav-menu');const navClose=document.getElementById('nav-close');const navLinks=document.querySelectorAll('.nav__link');if(navToggle){navToggle.addEventListener('click',()=>{navMenu.classList.add('nav__menu--active');});}if(navClose){navClose.addEventListener('click',()=>{navMenu.classList.remove('nav__menu--active');});}navLinks.forEach(link=>{link.addEventListener('click',()=>{navMenu.classList.remove('nav__menu--active');});});document.addEventListener('click',(e)=>{if(!navMenu.contains(e.target)&&!navToggle.contains(e.target)){navMenu.classList.remove('nav__menu--active');}});}function initHeaderScroll(){const header=document.getElementById('header');window.addEventListener('scroll',()=>{if(window.scrollY>100){header.style.backgroundColor='rgba(255,255,255,0.95)';header.style.backdropFilter='blur(10px)';}else{header.style.backgroundColor='#FFFFFF';header.style.backdropFilter='none';}});}function initSmoothScrolling(){const links=document.querySelectorAll('a[href^="#"]');links.forEach(link=>{link.addEventListener('click',function(e){e.preventDefault();const targetId=this.getAttribute('href');const targetSection=document.querySelector(targetId);if(targetSection){const headerHeight=document.getElementById('header').offsetHeight;const targetPosition=targetSection.offsetTop - headerHeight;window.scrollTo({top: targetPosition,behavior: 'smooth'});}});});}function initScrollAnimations(){const observerOptions={threshold: 0.1,rootMargin: '0px 0px -50px 0px'};const observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('animate');}});},observerOptions);const animateElements=document.querySelectorAll('.feature-card,.testimonial-card,.pricing-card,.faq-item');animateElements.forEach(el=>{el.classList.add('scroll-animate');observer.observe(el);});}function initAnimationOnScroll(){const statNumbers=document.querySelectorAll('.stat-number');const statsObserver=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){animateCounter(entry.target);statsObserver.unobserve(entry.target);}});},{threshold: 0.5});statNumbers.forEach(stat=>{statsObserver.observe(stat);});}function animateCounter(element){const text=element.textContent;const hasPercent=text.includes('%');const hasPlus=text.includes('+');const isZero=text.toLowerCase().includes('zero');if(isZero)return;const number=parseInt(text.replace(/[^\d]/g,''));const duration=2000;const steps=60;const increment=number / steps;const stepDuration=duration / steps;let current=0;const timer=setInterval(()=>{current +=increment;if(current>=number){current=number;clearInterval(timer);}let displayValue=Math.floor(current).toString();if(hasPercent)displayValue +='%';if(hasPlus)displayValue +='+';element.textContent=displayValue;},stepDuration);}function initFAQ(){const categoryBtns=document.querySelectorAll('.faq__category-btn');const categoryContents=document.querySelectorAll('.faq__category-content');categoryBtns.forEach(btn=>{btn.addEventListener('click',()=>{const category=btn.dataset.category;categoryBtns.forEach(b=>b.classList.remove('faq__category-btn--active'));categoryContents.forEach(c=>c.classList.remove('faq__category-content--active'));btn.classList.add('faq__category-btn--active');document.querySelector(`[data-category="${category}"].faq__category-content`).classList.add('faq__category-content--active');});});const faqQuestions=document.querySelectorAll('.faq-item__question');faqQuestions.forEach(question=>{question.addEventListener('click',()=>{const faqItem=question.parentElement;const isActive=faqItem.classList.contains('faq-item--active');document.querySelectorAll('.faq-item').forEach(item=>{item.classList.remove('faq-item--active');});if(!isActive){faqItem.classList.add('faq-item--active');}});});}function initWaitlistForm(){const form=document.getElementById('waitlist-form');const successMessage=document.getElementById('waitlist-success');if(form){form.addEventListener('submit',function(e){e.preventDefault();const formData=new FormData(form);const data=Object.fromEntries(formData);if(!data.email||!data.firstName){showNotification('Please fill in all required fields.','error');return;}if(!isValidEmail(data.email)){showNotification('Please enter a valid email address.','error');return;}const submitBtn=form.querySelector('button[type="submit"]');const originalText=submitBtn.innerHTML;submitBtn.innerHTML='<i class="fas fa-spinner fa-spin"></i>Joining...';submitBtn.disabled=true;fetch('https://formspree.io/f/xeozqjpo',{method: 'POST',headers:{'Accept': 'application/json','Content-Type': 'application/json'},body: JSON.stringify({email: data.email,firstName: data.firstName,organization: data.organization||'',providerType: data.providerType||'',state: data.state||'',_subject: 'New NDIS Pulse Waitlist Signup',_replyto: data.email})}).then(response=>{if(response.ok){form.style.display='none';successMessage.style.display='block';if(typeof gtag!=='undefined'){gtag('event','conversion',{'send_to': 'G-9TTNT05G3N/waitlist_signup','value': 1.0,'currency': 'AUD'});}showNotification('Successfully joined the waitlist!Please check your email(including spam/promotions folder)for confirmation. We\'ll be in touch within 24 hours.','success');form.reset();localStorage.setItem('waitlistSignup',JSON.stringify({email: data.email,firstName: data.firstName,providerType: data.providerType,state: data.state,timestamp: new Date().toISOString()}));}else{throw new Error('Form submission failed');}}).catch(error=>{console.error('Error:',error);showNotification('Oops!Something went wrong. Please try again or email us at jaysonryan2107@gmail.com','error');}).finally(()=>{submitBtn.innerHTML=originalText;submitBtn.disabled=false;});});}}function isValidEmail(email){const emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return emailRegex.test(email);}function showNotification(message,type='info'){const existingNotifications=document.querySelectorAll('.notification');existingNotifications.forEach(notification=>notification.remove());const notification=document.createElement('div');notification.className=`notification notification--${type}`;notification.innerHTML=`<div class="notification__content"><i class="fas fa-${type==='success' ? 'check-circle' : type==='error' ? 'exclamation-circle' : 'info-circle'}"></i><span>${message}</span><button class="notification__close"><i class="fas fa-times"></i></button></div>`;notification.style.cssText=` position: fixed;top: 100px;right: 20px;background: ${type==='success' ? '#28a745' : type==='error' ? '#dc3545' : '#007bff'};color: white;padding: 1rem 1.5rem;border-radius: 0.5rem;box-shadow: 0 4px 6px rgba(0,0,0,0.1);z-index: 10000;max-width: 400px;animation: slideInRight 0.3s ease-out;`;document.body.appendChild(notification);const closeBtn=notification.querySelector('.notification__close');closeBtn.addEventListener('click',()=>{notification.style.animation='slideOutRight 0.3s ease-out';setTimeout(()=>notification.remove(),300);});setTimeout(()=>{if(notification.parentElement){notification.style.animation='slideOutRight 0.3s ease-out';setTimeout(()=>notification.remove(),300);}},5000);}function initScrollToTop(){const scrollToTopBtn=document.createElement('button');scrollToTopBtn.innerHTML='<i class="fas fa-chevron-up"></i>';scrollToTopBtn.className='scroll-to-top';scrollToTopBtn.style.cssText=` position: fixed;bottom: 30px;right: 30px;width: 50px;height: 50px;background: var(--primary-color);color: white;border: none;border-radius: 50%;cursor: pointer;display: none;align-items: center;justify-content: center;font-size: 1.2rem;box-shadow: 0 4px 6px rgba(0,0,0,0.1);transition: all 0.3s ease;z-index: 1000;`;document.body.appendChild(scrollToTopBtn);window.addEventListener('scroll',()=>{if(window.scrollY>500){scrollToTopBtn.style.display='flex';}else{scrollToTopBtn.style.display='none';}});scrollToTopBtn.addEventListener('click',()=>{window.scrollTo({top: 0,behavior: 'smooth'});});scrollToTopBtn.addEventListener('mouseenter',()=>{scrollToTopBtn.style.transform='translateY(-3px)';scrollToTopBtn.style.boxShadow='0 6px 12px rgba(0,0,0,0.15)';});scrollToTopBtn.addEventListener('mouseleave',()=>{scrollToTopBtn.style.transform='translateY(0)';scrollToTopBtn.style.boxShadow='0 4px 6px rgba(0,0,0,0.1)';});}function initLazyLoading(){const images=document.querySelectorAll('img[data-src]');const imageObserver=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){const img=entry.target;img.src=img.dataset.src;img.classList.remove('lazy');imageObserver.unobserve(img);}});});images.forEach(img=>imageObserver.observe(img));}function debounce(func,wait){let timeout;return function executedFunction(...args){const later=()=>{clearTimeout(timeout);func(...args);};clearTimeout(timeout);timeout=setTimeout(later,wait);};}function trackButtonClick(buttonText,section){if(typeof gtag!=='undefined'){gtag('event','click',{'event_category': 'Button','event_label': buttonText,'custom_parameter_1': section});}}function initScrollDepthTracking(){const scrollDepths=[25,50,75,100];const trackedDepths=new Set();const trackScrollDepth=debounce(()=>{const scrollPercent=Math.round((window.scrollY /(document.documentElement.scrollHeight - window.innerHeight))* 100);scrollDepths.forEach(depth=>{if(scrollPercent>=depth&&!trackedDepths.has(depth)){trackedDepths.add(depth);if(typeof gtag!=='undefined'){gtag('event','scroll',{'event_category': 'Scroll Depth','event_label': `${depth}%`,'value': depth});}}});},500);window.addEventListener('scroll',trackScrollDepth);}function initTimeTracking(){const startTime=Date.now();const timeIntervals=[30,60,120,300];const trackedTimes=new Set();setInterval(()=>{const timeOnPage=Math.floor((Date.now()- startTime)/ 1000);timeIntervals.forEach(interval=>{if(timeOnPage>=interval&&!trackedTimes.has(interval)){trackedTimes.add(interval);if(typeof gtag!=='undefined'){gtag('event','timing_complete',{'name': 'time_on_page','value': interval});}}});},1000);}function initKeyboardNavigation(){const faqQuestions=document.querySelectorAll('.faq-item__question');faqQuestions.forEach(question=>{question.addEventListener('keydown',(e)=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();question.click();}});});const categoryBtns=document.querySelectorAll('.faq__category-btn');categoryBtns.forEach(btn=>{btn.addEventListener('keydown',(e)=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();btn.click();}});});}function initFocusManagement(){const skipLink=document.createElement('a');skipLink.href='#hero';skipLink.textContent='Skip to main content';skipLink.className='skip-link';skipLink.style.cssText=` position: absolute;top: -40px;left: 6px;background: var(--primary-color);color: white;padding: 8px;text-decoration: none;border-radius: 4px;z-index: 10000;transition: top 0.3s;`;skipLink.addEventListener('focus',()=>{skipLink.style.top='6px';});skipLink.addEventListener('blur',()=>{skipLink.style.top='-40px';});document.body.insertBefore(skipLink,document.body.firstChild);}function initFormValidation(){const emailInput=document.getElementById('email');const firstNameInput=document.getElementById('firstName');if(emailInput){emailInput.addEventListener('blur',()=>{if(emailInput.value&&!isValidEmail(emailInput.value)){emailInput.style.borderColor='var(--alert-red)';showFieldError(emailInput,'Please enter a valid email address');}else{emailInput.style.borderColor='';hideFieldError(emailInput);}});emailInput.addEventListener('input',()=>{if(emailInput.style.borderColor==='var(--alert-red)'){emailInput.style.borderColor='';hideFieldError(emailInput);}});}if(firstNameInput){firstNameInput.addEventListener('blur',()=>{if(!firstNameInput.value.trim()){firstNameInput.style.borderColor='var(--alert-red)';showFieldError(firstNameInput,'First name is required');}else{firstNameInput.style.borderColor='';hideFieldError(firstNameInput);}});firstNameInput.addEventListener('input',()=>{if(firstNameInput.style.borderColor==='var(--alert-red)'){firstNameInput.style.borderColor='';hideFieldError(firstNameInput);}});}}function showFieldError(field,message){hideFieldError(field);const errorElement=document.createElement('div');errorElement.className='field-error';errorElement.textContent=message;errorElement.style.cssText=` color: var(--alert-red);font-size: 0.875rem;margin-top: 0.25rem;`;field.parentNode.appendChild(errorElement);}function hideFieldError(field){const existingError=field.parentNode.querySelector('.field-error');if(existingError){existingError.remove();}}document.addEventListener('DOMContentLoaded',function(){initLazyLoading();initScrollDepthTracking();initTimeTracking();initKeyboardNavigation();initFocusManagement();initFormValidation();});const additionalCSS=` @keyframes slideInRight{from{transform: translateX(100%);opacity: 0;}to{transform: translateX(0);opacity: 1;}}@keyframes slideOutRight{from{transform: translateX(0);opacity: 1;}to{transform: translateX(100%);opacity: 0;}}.notification__content{display: flex;align-items: center;gap: 0.5rem;}.notification__close{background: none;border: none;color: inherit;cursor: pointer;padding: 0;margin-left: auto;}.lazy{opacity: 0;transition: opacity 0.3s;}.lazy.loaded{opacity: 1;}`;const style=document.createElement('style');style.textContent=additionalCSS;document.head.appendChild(style);